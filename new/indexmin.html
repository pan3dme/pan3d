<html>

<head>
    <title>index</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta content="IE=11.00" http-equiv="X-UA-Compatible" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=0.5, maximum-scale=0.5">
    <link rel="apple-touch-icon-precomposed" href="icon.png" />
    <link rel="touch-icon-precomposed" href="icon.png" />
    <style>
        canvas {
            position: absolute;
            top: 0px;
            left: 0px;
        }

        * {
            border: 0;
            padding: 0;
            margin: 0;
        }

        div ul {
            background-color: bisque;
            border-radius: 5px;
            margin: 0 auto;
            list-style: none;
            border: 1px solid black;
            width: 80px;
            text-align: center;
            overflow: hidden;
        }

        div li {
            background-color: pink;
            margin: 0 auto;
            padding: none;
            list-style: none;
            border: 1px solid black;
            width: 80px;
            text-align: center;
        }

        .class1 {
            display: none;
        }
    </style>

    <script src="dist/main.js"></script>
  
    

    <script>

   
        function getQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = decodeURI(window.location.search).substr(1).match(reg);
            if (r != null) return unescape(r[2]); return null;
        }
        function stringToJson(stringValue) {
            eval("var theJsonValue = " + stringValue);
            return theJsonValue;
        }
        var constrainSceneView;
        var hasInit = false;
        function init() {
            constrainSceneView = new Pan3d.ConstrainSceneView(document.getElementById('sceneCanvas'));
            hasInit = true;
            resetSize();
            window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
            if (requestAnimationFrame) {
                requestAnimationFrame(step);
            }
            setInterval("update()", 1000);//特别加一次系统时间的UPdata

            //是否亦传递过来的参数
            var infoStr = getQueryString("info");
            if (infoStr) {
                MenuEventModel.getInstance().selectSceneByJson(stringToJson(infoStr), constrainSceneView);
            }

            initMenuData();


        }
        function initMenuData() {
            var ul_0 = document.querySelector('#ul_0');
            var isFrist = true;
            var menuNum = 8;
            for (var j = 0; j < menuNum; j++)
                ul_0.children[j].children[0].onclick = function () {
                    var ul = this.parentNode.querySelectorAll('ul');
                    if (!isFrist) {
                        selectButByValue(this.text);
                    }
                    for (var i = 0; i < ul.length; i++) {
                        if (ul[i].className == 'class1') {
                            ul[i].className = 'unclass1';
                        }
                        else {
                            ul[i].className = 'class1';
                        }

                    }
                }
            for (var j = 0; j < menuNum; j++) {
                ul_0.children[j].children[0].onclick()
            }
            isFrist = false;
        }
        function step(timestamp) {
            update()
            requestAnimationFrame(step);
        }

        function resetSize() {
            if (hasInit) {
                constrainSceneView.resetSize();
            }
        }
        function update() {
            constrainSceneView.upFrame();
        }
        function selectButByValue(value) {


            MenuEventModel.getInstance().selectButByValue(value, constrainSceneView);

        }
       



    </script>
</head>

<body onload='init()' onresize="resetSize()" ontouchmove="event.preventDefault()"
    style="overflow-x: hidden; overflow-y: hidden;background-color:#f8f7f7">


    <canvas id="sceneCanvas" width="256" height="256" style="z-index:1;position: absolute;"></canvas>


    <div style="z-index:1;position: absolute;">
        <ul id='ul_0'>
            <li><a href="#">清理</a>
                <ul onclick="selectButByValue('清理|网格')">网格</ul>
                <ul onclick="selectButByValue('清理|所以')">清理</ul>
            </li>
            <li><a href="#">场景</a>
                <ul onclick="selectButByValue('场景|10002')">10002</ul>
                <ul onclick="selectButByValue('场景|10005')">10005</ul>
                <ul onclick="selectButByValue('场景|2014')">2014</ul>
                <ul onclick="selectButByValue('场景|1003')">1003</ul>
            </li>
            <li><a href="#">角色</a>
                <ul onclick="selectButByValue('角色|50011')">男</ul>
                <ul onclick="selectButByValue('角色|2052')">女</ul>
                <ul onclick="selectButByValue('角色|yezhuz')">野猪</ul>
                <ul onclick="selectButByValue('角色|10013')">10013</ul>
                <ul onclick="selectButByValue('角色|5104')">5104</ul>
            </li>
            <li><a href="#">特效</a>
                <ul onclick="selectButByValue('特效|10017')">10017</ul>
                <ul onclick="selectButByValue('特效|10018')">10018</ul>
                <ul onclick="selectButByValue('特效|levelup')">levelup</ul>
            </li>
            <li><a href="#">坐骑</a>
                <ul onclick="selectButByValue('坐骑|5104')">10017</ul>

            </li>
            <li><a href="#">武器</a>
                <ul onclick="selectButByValue('武器|weapon1')">10017</ul>

            </li>

            <li><a href="#">技能</a>
                <ul onclick="selectButByValue('技能|jichu_1|m_skill_01')">m_skill_01</ul>
                <ul onclick="selectButByValue('技能|jichu_1|m_skill_02')">m_skill_02</ul>
                <ul onclick="selectButByValue('技能|jichu_1|m_skill_03')">m_skill_03</ul>
                <ul onclick="selectButByValue('技能|jichu_1|m_skill_04')">m_skill_04</ul>
                <ul onclick="selectButByValue('技能|jichu_1|skill_01')">skill_01</ul>
                <ul onclick="selectButByValue('技能|jichu_1|skill_02')">skill_02</ul>
                <ul onclick="selectButByValue('技能|jichu_1|skill_03')">skill_03</ul>
            </li>
            <li><a href="#">frame3d</a>
            </li>
        </ul>
    </div>
</body>

</html>